<!DOCTYPE html>
<html lang="en">

<head>
    <title>Movies</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="navigation.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
    <header id="header"></header>
    <h1>
        <u class="moviesHead">Movies</u>
    </h1><br>

    <div class="moviesPage">




    </div>
    <div class="filter">
        <h1>Filter By</h1>
        <a href="#">Clear</a>

        <h3 id="Language">Language</h3>
        <!-- <form onsubmit="tamil()"> -->
        <label><br>
            <input type="checkbox" name="language" id="language" value="tamil" style="margin-bottom: 15px;">Tamil
        </label>
        <label><br>
            <input type="checkbox" name="language" id="language" value="english" style="margin-bottom: 15px;">English
        </label><br>
        <button type="button" onclick="filterLanguages()">
            Apply
        </button>
        <button type="reset" >
            reset
        </button>
    </div>
    
    
    
    
    
    <script src="book.js"></script>
    <script src="filter.js"></script>
    <script src="assets/loginuser.js"></script>
    
    <script src="assets/jquery.min.js"></script>
    <script>
        $("#header").load("header.html")


       
        // // displaying images 
        function getMovies() {
            const dbUsername='apikey-v2-ijzqz68xo4ar5nrlcenfueq1cy3mgg675nzk8td8x9w';
          const dbPassword='e455d34a303110b468819fbc14388b5e';
          const basicAuth= 'Basic ' + btoa(dbUsername+':'+dbPassword);
            const url = "https://a7e75d33-40d2-47a6-a9b9-f80dbbc41c98-bluemix.cloudantnosqldb.appdomain.cloud/movieapp_movies/_all_docs?include_docs=true";
            axios.get(url,{headers:{Authorization:basicAuth}}).then(res => {

                let movies = res.data.rows;
                movies=movies.map((obj)=>obj.doc);
                displayMovies(movies)})
                    .catch(err => {
                      console.error(err);
                    });
        
        }
        getMovies();
        // alert(datas);
        function displayMovies(movies) {
            // console.log(movies);
            for (let la of movies) {
                let content = "";
                var count = 0;
                for (let img of movies) {
                    console.log(img);

                    content = content +
                        `
            <div class="product">
                
                  <a onClick="showMovies('${img.title}')"   href="book.html?movie=${img.title}&id=${img._id}">  <img class="productImg" src="images/${img.imageUrl}" id="productImg" alt=""></a>
                 
            </div>`;
                    count = count + 1;
                    if (count == 2) {
                        content = content + `<br>`;
                        count = 0;
                    }

                }
                document.querySelector(".moviesPage").innerHTML = content;
            }
        }

  

    function showMovies(title){


//movies.html
localStorage.setItem("SELECTED_MOVIE",title);}


</script>

</body>

</html>