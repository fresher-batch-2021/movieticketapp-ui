<!DOCTYPE html>
<html lang="en" >
<head>
    <title>SignUp</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
</head>
<body>


    <header id="header"></header>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>  
    
    

    <form action="login.html" onsubmit="Register()" style="border:1px solid #ccc">
     <div class="container">
     <div class="box1">
    <h1>SignUp</h1><br>
    <p>Please fill in this form to create an account</p><br>
    <hr>
    <label for ="email"><strong>Email</strong></label>
    <input type="email" placeholder="Enter Mail" name="email" id="email" required><br>
    
    <label for ="password"><strong>password</strong></label>
    <input type="password" placeholder="Enter password" name="password" id="password"required><br>

    <label for ="password-repeat"><strong>repeat password</strong></label>
    <input type="password" placeholder="repeat password" name="password-repeat" id="password-repeat"required><br>

    <label>
    <input type="checkbox" checked="checked" name="remember" 
    style="margin-bottom:15px">Remember Me </label><hr>

    <p>By creating an account you agree to out <a href="#" style="color: dodgerblue;">Terms & Privacy</a></p>
    <div class="clearfix"><br>
        <button type="reset" class="cancelButton">Cancel</button>
        <button type="submit" class="SignUpButton">SignUp</button>
    </div>
    </div>
</div>
</form>

<script src="assets/jquery.min.js"></script>
<script>
    $("#header").load("header.html");
    function Register(){
        event.preventDefault();
        const email = document.querySelector("#email").value;
        const password = document.querySelector("#password").value;
        const passwordR = document.querySelector("#password-repeat").value;
        console.log(email+"-"+password+"-"+passwordR);
        let userobj={
            "email":email,
            "password":password,
            "password-repeat":passwordR
        }
        console.log(userobj);
    if(password == null  || password.trim()==""){
        alert("password cannot be empty");
    }
        else if(password != passwordR){
       alert("password incorrect");
    }
    else if(password.length < 8)
 {
    alert("password must be greater than 8 characters");
   
      }
      else{
        const url="https://product-mock-api.herokuapp.com/movieapp/api/v1/auth/register";
        axios.post(url,userobj).then(res =>{
            alert("registration successful");
            window.location.href ="login.html";

        }).catch(err =>{
            console.error(err);
            alert("unable to register");
        });
      }

    }
      
   
        
     
</script>
</body>
</html>